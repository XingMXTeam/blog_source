<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=manifest href=https://maoxunxing.com/manifest.json><meta name=author content="Xunxing Mao"><meta name=description content="articles about Front-End development and engineering technology including html, css, javascript, nodejs, c, algorithms, software architecture"><meta name=keywords content=blog,developer,personal,毛训星,maoxunxing,front-end,html,css,javascript,nodejs><meta name=twitter:card content=summary_large_image><meta name=twitter:site content=@maoxunxing><meta name=twitter:creator content=@maoxunxing><meta property=og:title content="How Web Works"><meta property=og:description content="What are the concepts? What does the request link look like? What are distributed systems and what are the problems to be solved? Problem solving for big data and high concurrency?"><meta property=og:type content=article><meta property=og:url content=https://maoxunxing.com/zh-cn/website-architecture/><meta property=og:image content=https://maoxunxing.com/website-architecture/test.png><meta property=article:published_time content=2021-08-06T15:25:06+08:00><meta property=article:modified_time content=2021-08-06T15:25:06+08:00><meta property=og:site_name content=毛训星的网络日志><base href=https://maoxunxing.com/zh-cn/website-architecture/><title>How Web Works · 毛训星的网络日志</title><link rel=canonical href=https://maoxunxing.com/zh-cn/website-architecture/><link rel="preconnect dns-prefetch" href=//cdn.jsdelivr.net><link rel="preconnect dns-prefetch" href=//cdnjs.cloudflare.com><link rel=preload as=style rel=stylesheet onload="this.onload=null;this.rel='stylesheet'" href=../css/font.css crossorigin=anonymous><link rel=preload as=style rel=stylesheet onload="this.onload=null;this.rel='stylesheet'" href=https://cdn.jsdelivr.net/npm/normalize.min.css@8.0.1/normalize.min.css integrity="sha256-oeib74n7OcB5VoyaI+aGxJKkNEdyxYjd2m3fi/3gKls=" crossorigin=anonymous><link rel=stylesheet href=https://maoxunxing.com/css/coder.min.8b74f2a917b62bc11fd3bb6cdbb2f369faa9711339338533e3cf2d9997c70b38.css integrity="sha256-i3TyqRe2K8Ef07ts27LzafqpcRM5M4Uz488tmZfHCzg=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://maoxunxing.com/css/coder-dark.min.83a2010dac9f59f943b3004cd6c4f230507ad036da635d3621401d42ec4e2835.css integrity="sha256-g6IBDayfWflDswBM1sTyMFB60DbaY102IUAdQuxOKDU=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://maoxunxing.com/css/main.css><link rel=icon type=image/png href=https://maoxunxing.com/images/favicon/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://maoxunxing.com/images/favicon/favicon-16x16.png sizes=16x16><link rel=alternate type=application/rss+xml href=https://maoxunxing.com//index.xml title=毛训星的网络日志><meta name=generator content="Hugo 0.55.4"></head><body class=colorscheme-auto><div class=float-container></div><main class=wrapper><nav class=navigation><section class=container><div class=navigation-author><a class=navigation-avatar href=https://maoxunxing.com/zh-cn><img style=width:50x;height:50px src=https://maoxunxing.com/images/avatar.jpg alt="Author photo"></a>
<a class=name href=https://maoxunxing.com/zh-cn>训星个人站</a></div><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fas fa-bars"></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=https://maoxunxing.com/zh-cn/posts/>博客</a></li><li class=navigation-item><a class=navigation-link href=https://maoxunxing.com/zh-cn/projects/>项目</a></li><li class=navigation-item><a class=navigation-link href=https://maoxunxing.com/zh-cn/book-reports/>读书报告</a></li><li class=navigation-item><a class=navigation-link href=https://maoxunxing.com/zh-cn/about/>关于</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class=navigation-item><a href=https://maoxunxing.com/zh-cn/notes class="router-link-active router-link-exact-active" title=Notes data-v-939756fc aria-current=page><svg class="inline" width="1.2em" height="1.2em" viewBox="0 0 24 24" style="vertical-align:sub"><path d="M21 15l-6 5.996L4.002 21A.998.998.0 0 1 3 20.007V3.993C3 3.445 3.445 3 3.993 3h16.014c.548.0.993.456.993 1.002V15zM19 5H5v14h8v-5a1 1 0 0 1 .883-.993L14 13l5-.001V5zm-.829 9.999L15 15v3.169l3.171-3.17z" fill="currentcolor"/></svg></a></li><li class=navigation-item><a href=https://github.com/XingMXTeam/ target=_blank title=GitHub data-v-939756fc><svg class="inline" width="1.2em" height="1.2em" viewBox="0 0 24 24" style="vertical-align:sub"><path d="M10.07 20.503a1 1 0 0 0-1.18-.983c-1.31.24-2.963.276-3.402-.958a5.708 5.708.0 0 0-1.837-2.415 1.2 1.2.0 0 1-.167-.11 1 1 0 0 0-.93-.645h-.005a1 1 0 0 0-1 .995c-.004.815.81 1.338 1.141 1.514a4.44 4.44.0 0 1 .924 1.36c.365 1.023 1.423 2.576 4.466 2.376l.003.098.004.268a1 1 0 0 0 2 0l-.005-.318c-.005-.19-.012-.464-.012-1.182zM20.737 5.377c.032-.125.063-.264.09-.42a6.278 6.278.0 0 0-.408-3.293 1.002 1.002.0 0 0-.615-.58c-.356-.12-1.67-.357-4.184 1.25a13.87 13.87.0 0 0-6.354.0C6.762.75 5.455.966 5.102 1.079a.997.997.0 0 0-.631.584 6.3 6.3.0 0 0-.404 3.357c.025.127.051.246.079.354a6.27 6.27.0 0 0-1.256 3.83 8.422 8.422.0 0 0 .043.921c.334 4.603 3.334 5.984 5.424 6.459a4.591 4.591.0 0 0-.118.4 1 1 0 0 0 1.942.479 1.678 1.678.0 0 1 .468-.878 1 1 0 0 0-.546-1.745c-3.454-.395-4.954-1.802-5.18-4.899a6.61 6.61.0 0 1-.033-.738 4.258 4.258.0 0 1 .92-2.713 3.022 3.022.0 0 1 .195-.231 1 1 0 0 0 .188-1.025 3.388 3.388.0 0 1-.155-.555 4.094 4.094.0 0 1 .079-1.616 7.543 7.543.0 0 1 2.415 1.18 1.009 1.009.0 0 0 .827.133 11.777 11.777.0 0 1 6.173.001 1.005 1.005.0 0 0 .83-.138 7.572 7.572.0 0 1 2.406-1.19 4.04 4.04.0 0 1 .087 1.578 3.205 3.205.0 0 1-.169.607 1 1 0 0 0 .188 1.025c.078.087.155.18.224.268A4.122 4.122.0 0 1 20 9.203a7.039 7.039.0 0 1-.038.777c-.22 3.056-1.725 4.464-5.195 4.86a1 1 0 0 0-.546 1.746 1.63 1.63.0 0 1 .466.908 3.06 3.06.0 0 1 .093.82v2.333c-.01.648-.01 1.133-.01 1.356a1 1 0 1 0 2 0c0-.217.0-.692.01-1.34v-2.35a4.881 4.881.0 0 0-.155-1.311 4.256 4.256.0 0 0-.116-.416 6.513 6.513.0 0 0 5.445-6.424A8.697 8.697.0 0 0 22 9.203a6.13 6.13.0 0 0-1.263-3.826z" fill="currentcolor"/></svg></a></li><li class=navigation-item><a href=https://www.douban.com/people/maoxingxing/ target=_blank title=douban class=lt-md:hidden data-v-939756fc><svg t="1637423568461" class="icon douban" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="4782" width="1.2em" height="1.2em"><path d="M715.824 611.542h-395.425c42.209 71.089 82.194 148.841 115.519 228.812h162.166c48.875-75.533 88.861-151.06 117.739-228.812zM762.474 524.904V356.071h-486.503v168.833h486.503zM960.187 929.214h-888.596v-86.637H338.17c-33.322-71.089-66.646-133.289-102.189-184.386l68.865-44.427H184.885V267.209h675.334v346.555h-126.623l68.865 44.427c-33.322 71.089-66.646 133.289-99.966 184.386h259.916v86.637zM940.196 165.023H98.25V78.386h841.946v86.637z" fill="currentcolor" p-id="4783"/></svg></a></li><li class=navigation-item><a href=https://twitter.com/maoxunxing/ target=_blank title=Twitter data-v-939756fc><svg class="inline" width="1.2em" height="1.2em" viewBox="0 0 24 24" style="vertical-align:sub"><g fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9.0 0 1-3.14 1.53 4.48 4.48.0 0 0-7.86 3v1A10.66 10.66.0 0 1 3 4s-4 9 5 13a11.64 11.64.0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5.0 0 0-.08-.83A7.72 7.72.0 0 0 23 3z"/></g></svg></a></li><li class=navigation-item><a href=https://maoxunxing.com/en/posts/index.xml target=_blank title=RSS class=lt-md:hidden data-v-939756fc><svg class="inline rss" width="1.2em" height="1.2em" viewBox="0 0 32 32" style="vertical-align:sub;font-size:2rem;margin:0 -.125rem"><path d="M5 5v22h22V5zm2 2h18v18H7zm5 3c-.684.0-1.355.055-2 .188v2.062a7.86 7.86.0 0 1 2-.25c4.41.0 8 3.59 8 8 0 .691-.086 1.36-.25 2h2.063A9.923 9.923.0 0 0 22 20c0-5.516-4.484-10-10-10zm0 4a5.96 5.96.0 0 0-2 .344v2.219A3.968 3.968.0 0 1 12 16c2.207.0 4 1.793 4 4 0 .73-.219 1.41-.563 2h2.22A5.96 5.96.0 0 0 18 20c0-3.309-2.691-6-6-6zm0 4a1.999 1.999.0 1 0 0 4 1.999 1.999.0 1 0 0-4z" fill="currentcolor"/></svg></a></li><li class=navigation-item><a href=javascript:void id=dark-mode-toggle title="Toggle Color Scheme"><svg class="inline dark-mode-icon" width="1.2em" height="1.2em" viewBox="0 0 24 24" style="vertical-align:sub"><path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2h.1A6.979 6.979.0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938 7.999 7.999.0 0 0 4 12z" fill="currentcolor"/></svg><svg class="inline light-mode-icon" width="1.2em" height="1.2em" viewBox="0 0 24 24" style="vertical-align:sub"><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85 1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z" fill="currentcolor"/></svg></a></li><li class=navigation-item><a href=https://maoxunxing.com/en/ id=languageMenu>EN</a></li></ul></section></nav><script>window.addEventListener('load',()=>{const menu=document.getElementById('languageMenu')
const arr=location.pathname.split("/");menu.setAttribute('href',menu.getAttribute('href')+(arr.length>=4?arr[arr.length-2]:''))})</script><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title>How Web Works</h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fas fa-calendar"></i><time datetime=2021-08-06T15:25:06&#43;08:00>August 6, 2021</time></span>
<span class=reading-time><i class="fas fa-clock"></i>6 分钟阅读时间</span></div><div class=tags><i class="fas fa-tag"></i><a href=https://maoxunxing.com/zh-cn/tags/architecture/>Architecture</a></div></div></header><div><h2 id=basic-concepts>Basic Concepts<a href=#basic-concepts class=hanchor arialabel=Anchor> 🔗&#xFE0E;</a></h2><table><thead><tr><th>Category<div style=width:100px></div></th><th>Name<div style=width:200px></div></th><th>Explanation</th></tr></thead><tbody><tr><td>Network</td><td>VPC</td><td>Virtual Private Cloud Virtual Private Cloud. Why Virtual Private? It is a collection of resources that run on a public cloud, isolating a portion of the public cloud resources for a particular user, and giving that user private access to resources that feel like they are using their own private cloud. What is a cloud? A virtualized network built on top of a physical one, VPCs use tunneling technology to isolate the virtual network. Each VPC has an individual tunnel number, and one tunnel number corresponds to one virtualized network. It consists of a private network segment (subnet) + a router (total entry) + a switch (further cut).</td></tr><tr><td>Network</td><td>DNS</td><td>Application layer protocol is the same as https, port is 53, providing IP lookup based on domain name</td></tr><tr><td>Network</td><td>Record</td><td>Correspondence between records and IPs</td></tr><tr><td>Network</td><td>A Record</td><td>Supports mapping domain names to IPV4 addresses</td></tr><tr><td>Network</td><td>CNAME</td><td>Alias Canonical Name supports pointing to another domain name</td></tr><tr><td>Network</td><td>MX</td><td>Mail Exchanger Support for pointing a domain name to a mail server address</td></tr><tr><td>Network</td><td>NS</td><td>name server Name server records. Support for delegating sub-domains to other DNS providers for resolution</td></tr><tr><td>Network</td><td>CDN</td><td>Content Delivery Network Solve the problem of slow access to websites due to small network bandwidth, large access volume and uneven distribution of networks</td></tr><tr><td>Network</td><td>Node</td><td>Traditional node is a single physical machine -&gt; a service on a single virtual machine -&gt; a lightweight container service that provides a collection of logical computing resources per unit of service</td></tr><tr><td>Network</td><td>Unified Access Layer</td><td>web server proxy, which forwards requests to (proxy_pass) application servers. Can solve the domain name management, certificate management, security management (application access site-wide https, private key landing)</td></tr><tr><td>Distributed</td><td>NTP (Network Time Protocol)</td><td>A network protocol for clock synchronization via packet switching between computer systems with variable latency on data networks, located at the application layer of the OSI model</td></tr><tr><td>Distributed</td><td>Lamport Logical/Vector Clock</td><td>A technique for generating off-sequence values for various operations or events in a distributed environment that detects parallel conflicts of operations or events and is used to maintain system consistency</td></tr><tr><td>Cloud Native</td><td>K8s</td><td>Kubernetes An open source container scheduling platform for cross-host clusters that automates the deployment, scaling and operation of application containers. Provides a container-centric infrastructure that is cloud-native</td></tr><tr><td>Cloud-native</td><td>Docker</td><td>System-level once build run everywhere, test environment building, continuous integration, continuous delivery brings a lot of convenience. Open vision towards full stack (DevOps)</td></tr></tbody></table><h2 id=request-link>Request Link<a href=#request-link class=hanchor arialabel=Anchor> 🔗&#xFE0E;</a></h2><blockquote><p>What are the general links under an http request modernization architecture</p></blockquote><p>1 Domain name resolution IP<br>2 Unified Access Layer<br>3 Load balancing Key-hash-&gt;cluster<br>4 Gateway layer<br>5 Application server</p><h2 id=distributed-services-architecture>Distributed services/architecture<a href=#distributed-services-architecture class=hanchor arialabel=Anchor> 🔗&#xFE0E;</a></h2><h3 id=development-trajectory>Development trajectory<a href=#development-trajectory class=hanchor arialabel=Anchor> 🔗&#xFE0E;</a></h3><blockquote><p>How modern server architectures have evolved</p></blockquote><p>1 RPC (Remote Process Call)<div class=img style=max-width:600px><a href=https://maoxunxing.com/zh-cn/website-architecture/rpc.png><img sizes="(min-width: 768px) 600px, 98vw" srcset="/zh-cn/website-architecture/rpc_hu60fc0e5288536b5022c159efd9350eaf_12270_300x0_resize_lanczos_2.png 300w,
                  
                
                
                
                
                /zh-cn/website-architecture/rpc.png 594w" src=https://maoxunxing.com/zh-cn/website-architecture/rpc.png alt=rpc loading=lazy></a></div></p><p>2 SOA (Service-Oriented Architecture, like hsf, dubbo) Service-Oriented Architecture</p><p>Features.</p><ul><li>Distributed deployment</li><li>Request triage</li><li>Separation of data reading and writing</li></ul><div class=img style=max-width:600px><a href=https://maoxunxing.com/zh-cn/website-architecture/soa.jpg><img sizes="(min-width: 768px) 600px, 98vw" srcset="/zh-cn/website-architecture/soa_hu2f1e02e515e351c311ec896043222feb_195908_300x0_resize_q90_lanczos.jpg 300w,
                  
                
                    
                    /zh-cn/website-architecture/soa_hu2f1e02e515e351c311ec896043222feb_195908_600x0_resize_q90_lanczos.jpg 600w,
                  
                
                    
                    /zh-cn/website-architecture/soa_hu2f1e02e515e351c311ec896043222feb_195908_800x0_resize_q90_lanczos.jpg 800w,
                  
                
                    
                    /zh-cn/website-architecture/soa_hu2f1e02e515e351c311ec896043222feb_195908_1200x0_resize_q90_lanczos.jpg 1200w,
                  
                
                /zh-cn/website-architecture/soa.jpg 1252w" src=https://maoxunxing.com/zh-cn/website-architecture/soa.jpg alt=soa loading=lazy></a></div><p>3 MSA Microservice Architecture<div class=img style=max-width:600px><a href=https://maoxunxing.com/zh-cn/website-architecture/msa.jpg><img sizes="(min-width: 768px) 600px, 98vw" srcset="/zh-cn/website-architecture/msa_hu2f1e02e515e351c311ec896043222feb_84415_300x0_resize_q90_lanczos.jpg 300w,
                  
                
                    
                    /zh-cn/website-architecture/msa_hu2f1e02e515e351c311ec896043222feb_84415_600x0_resize_q90_lanczos.jpg 600w,
                  
                
                    
                    /zh-cn/website-architecture/msa_hu2f1e02e515e351c311ec896043222feb_84415_800x0_resize_q90_lanczos.jpg 800w,
                  
                
                    
                    /zh-cn/website-architecture/msa_hu2f1e02e515e351c311ec896043222feb_84415_1200x0_resize_q90_lanczos.jpg 1200w,
                  
                
                /zh-cn/website-architecture/msa.jpg 1256w" src=https://maoxunxing.com/zh-cn/website-architecture/msa.jpg alt=msa loading=lazy></a></div></p><h3 id=distributed-architecture-theory>Distributed architecture theory<a href=#distributed-architecture-theory class=hanchor arialabel=Anchor> 🔗&#xFE0E;</a></h3><blockquote><p>What you need to know about distributed architecture Theory</p></blockquote><p>Consistency theory</p><ul><li>CAP (Strong Consistency)</li><li>ACID (Distributed Consistency)</li><li>Base (Weak Consistency)<ul><li><a href=http://thesecretlivesofdata.com/raft/>Distributed consensus theory</a></li></ul></li></ul><p>Consistency algorithm</p><p>CALM-&gt;CRDT-&gt;Highly Available Transactions + ZAB Protocol Analysis-&gt;Paxos Raft Gossip</p><h3 id=distributed-applications>Distributed Applications<a href=#distributed-applications class=hanchor arialabel=Anchor> 🔗&#xFE0E;</a></h3><blockquote><p>What are the distributed applications</p></blockquote><p>File system: HDFS FastDFS Ceph mooseFS
<a href="https://en.wikipedia.org/wiki/Comparison_of_distributed_file_systems?spm=ata.21736010.0.0.30f21d02woZ6di">compare</a><br>Database: Hbase (columnar storage), Elasticsearch/mongodb (document storage), redis (kv type), spanner (relational)<br>Compute: offline hadoop real-time spark streaming storm/flink/blink<br>cache: persistent redis non-persistent memcache<br>messaging: kafka rabbitmq rocketmq activemq<br>Monitoring: zookeeper<br>Applications: hsf dubbo<br>logs: collect flum, store elasticsearch/solr sls, locate zipkin<br>Ledger: bitcoin ethereum</p><p><strong>Application Scenarios</strong>.</p><ul><li>asynchronous calls<ul><li>improve qps capacity e.g. real time live room</li></ul></li><li>Application decoupling<ul><li>order system-&gt;message system-&gt;stock system(push or pull)</li></ul></li><li>Traffic control<ul><li>spike activity/group buy</li></ul></li><li>Log processing<ul><li>client-&gt;kafka queue-&gt;application log synchronization</li></ul></li><li>subscription<ul><li>point to point / pub sub mode like IM</li></ul></li><li>Broadcast mode cache synchronization<br></li></ul><p>Examples.</p><ul><li>high capability and persistence : Active MQ, Rabbit MQ, Rocket MQ<ul><li>question is consistency questions?</li><li>use db and message queue to ensure final consistency</li></ul></li><li>client/zookeeper/kafka/storm clusterf</li><li>JMS<ul><li>EJB J2EE</li><li>Message mode(p2p/pub sub), Message Consume(async sync )</li></ul></li></ul><p>How to avoid message loss.</p><ul><li>TCP cannot ensure application no lost * sync</li><li>sync<ul><li>wait confirm</li><li>continue ARQ(slide window)</li></ul></li><li>async<ul><li>callback function</li></ul></li></ul><p>Message idempotency.</p><ul><li>query/delete: no special handle</li><li>unique index<ul><li>avoid dirty data</li></ul></li><li>token(token+redis/jvm memory)<ul><li>avoid repeat submit</li><li>token need to apply, only one time</li><li>1 apply token</li><li>2 submit and to check token, if delete success that token exsit</li></ul></li><li>Pessimistic lock<ul><li>query with</li></ul></li><li>optimistic lock<ul><li>update with</li></ul></li><li>distributed lock<ul><li>if system is distributed, it is hard to build unique index. userid_suffix as key to get distributed lock(multiple threads concurrent lock)</li></ul></li><li>select+insert<ul><li>when concurrent not high, we can use this</li><li>search data, if exsit, not run next<br></li></ul></li></ul><p>ensure that the message is in order (queue not in order but the message is in order)</p><ul><li>sender: async send message, if 1 failed, you need to resend, cannot promise order</li><li>You cannt split the message to different messages:<ul><li>you cannt split message to different queue</li><li>if you have only one queue, how to promise order if a machine unavailable, you can switch to another machine(when message is not consumed)</li><li>sync copy to promise the order
sync copy to promise the order * receiver</li><li>sync consume</li></ul></li></ul><h3 id=distributed-caching>Distributed caching<a href=#distributed-caching class=hanchor arialabel=Anchor> 🔗&#xFE0E;</a></h3><blockquote><p>How to solve distributed caching problems</p></blockquote><p>Data flow<div class=img style=max-width:600px><a href=https://maoxunxing.com/zh-cn/website-architecture/data-flow.png><img sizes="(min-width: 768px) 600px, 98vw" srcset="/zh-cn/website-architecture/data-flow_hua1ab566bdefc2d492e8dd2a288e94b5b_81854_300x0_resize_lanczos_2.png 300w,
                  
                
                    
                    /zh-cn/website-architecture/data-flow_hua1ab566bdefc2d492e8dd2a288e94b5b_81854_600x0_resize_lanczos_2.png 600w,
                  
                
                
                
                /zh-cn/website-architecture/data-flow.png 722w" src=https://maoxunxing.com/zh-cn/website-architecture/data-flow.png alt=data-flow loading=lazy></a></div></p><p>Using middleware middleware</p><p><strong>Redis</strong>.</p><ul><li>why is it fast<ul><li>use memory</li><li>non-blocking multiplexing io</li><li>single thread</li></ul></li><li>Application Scenarios<ul><li>sorted set( top N, range find, delay task, )</li><li>set(remove duplicated, common and unique things)</li><li>list(message queue, pagination)</li><li>hash(single point login)</li><li>string(count cache)</li></ul></li><li>memory policy<ul><li>delete regularly and randomly</li><li>lazy delete when get key</li><li>memory elimination</li></ul></li><li>progressive hashing (rehashing)</li><li>cache penetration<ul><li>How to solve</li><li>how to solve</li><li>bitmap</li><li>empty value to cache</li></ul></li><li>cache avalanche<ul><li>expire time randomly</li><li>limit flow</li><li>distributed lock</li></ul></li></ul><h3 id=distributed-database>Distributed database<a href=#distributed-database class=hanchor arialabel=Anchor> 🔗&#xFE0E;</a></h3><p>Read-write separation: data is written to the master and read from the standby (data is replicated to the master)<br>Vertical splitting: different business units are divided into different databases. ACID is broken; Join operation is difficult; foreign key constraints are affected
Horizontal table splitting: single table split (e.g. ugc table is very large) Self-incrementing primary key is affected; single table query becomes multi-table</p><p>Application scenarios.<br>1 Read-write separation<br>2 library splitting and table splitting<br>3 Dynamic data source<br>4 Master-standby switching</p><h3 id=distributed-scheduling>Distributed Scheduling<a href=#distributed-scheduling class=hanchor arialabel=Anchor> 🔗&#xFE0E;</a></h3><p>schedulerX</p><h3 id=distributed-search>Distributed search<a href=#distributed-search class=hanchor arialabel=Anchor> 🔗&#xFE0E;</a></h3><p>Open Search</p><h3 id=distributed-transactions>Distributed transactions<a href=#distributed-transactions class=hanchor arialabel=Anchor> 🔗&#xFE0E;</a></h3><p>TXC(Taobao Transaction Constructor)</p><h3 id=distributed-computing>Distributed Computing<a href=#distributed-computing class=hanchor arialabel=Anchor> 🔗&#xFE0E;</a></h3><p><strong>blink</strong>: Distributed real-time computing<br><strong>odps</strong> (Open Data Processing Service): Distributed offline computing Storage and computation of structured data, massive data warehouse solutions and big data analysis and modeling</p><ul><li>web: service provisioning<br></li><li>sdk: packaging api<br></li><li>clt: client-side tools, submit commands<br></li><li>ide: visualization operations<br></li></ul><h2 id=big-data-and-high-concurrency>Big Data and High Concurrency<a href=#big-data-and-high-concurrency class=hanchor arialabel=Anchor> 🔗&#xFE0E;</a></h2><blockquote><p>What are the solutions for big data and high concurrency scenarios?</p></blockquote><h3 id=bitmap>bitmap<a href=#bitmap class=hanchor arialabel=Anchor> 🔗&#xFE0E;</a></h3><ul><li><p>Application scenario (data range below int*10)</p><ul><li>quick sort not repeated array</li><li>quick remove repeat</li><li>quick search</li><li>bloom filter (high Accuracy)</li><li>check url is the same</li></ul></li><li><p>advantage</p><ul><li>less memory usage</li></ul></li></ul><h3 id=flow-limiting-algorithm>Flow limiting algorithm<a href=#flow-limiting-algorithm class=hanchor arialabel=Anchor> 🔗&#xFE0E;</a></h3><ul><li>count number</li><li>sliding window</li><li>leaky bucket</li><li>token bucket</li></ul><h3 id=load-balancing>Load balancing<a href=#load-balancing class=hanchor arialabel=Anchor> 🔗&#xFE0E;</a></h3><ul><li>dns</li><li>reverse proxy</li><li>http redirect</li><li>Stratification</li></ul><h3 id=operations-and-monitoring>Operations and Monitoring<a href=#operations-and-monitoring class=hanchor arialabel=Anchor> 🔗&#xFE0E;</a></h3><h3 id=concepts>Concepts<a href=#concepts class=hanchor arialabel=Anchor> 🔗&#xFE0E;</a></h3><p>DevOps: Continuous Development, Continuous Testing, Continuous Integration, Continuous Deployment, Continuous Monitoring</p><div class=img style=max-width:600px><a href=https://maoxunxing.com/zh-cn/website-architecture/devops.jpg><img sizes="(min-width: 768px) 600px, 98vw" srcset="/zh-cn/website-architecture/devops_hu2f1e02e515e351c311ec896043222feb_66170_300x0_resize_q90_lanczos.jpg 300w,
                  
                
                    
                    /zh-cn/website-architecture/devops_hu2f1e02e515e351c311ec896043222feb_66170_600x0_resize_q90_lanczos.jpg 600w,
                  
                
                    
                    /zh-cn/website-architecture/devops_hu2f1e02e515e351c311ec896043222feb_66170_800x0_resize_q90_lanczos.jpg 800w,
                  
                
                
                /zh-cn/website-architecture/devops.jpg 914w" src=https://maoxunxing.com/zh-cn/website-architecture/devops.jpg alt=devops loading=lazy></a></div></div><style type=text/css>#mc_embed_signup form{display:block;position:relative;text-align:left;padding:10px 0 10px 3%}#mc_embed_signup h2{font-weight:700;padding:0;margin:15px 0;font-size:1.4em}#mc_embed_signup input{border:1px solid #abb0b2;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}#mc_embed_signup input[type=checkbox]{-webkit-appearance:checkbox}#mc_embed_signup input[type=radio]{-webkit-appearance:radio}#mc_embed_signup input:focus{border-color:#333}#mc_embed_signup .button{clear:both;background-color:#aaa;border:0;border-radius:4px;transition:all .23s ease-in-out 0s;color:#fff;cursor:pointer;display:inline-block;font-size:15px;font-weight:400;height:32px;line-height:32px;margin:0 5px 10px 0;padding:0 22px;text-align:center;text-decoration:none;vertical-align:top;white-space:nowrap;width:auto}#mc_embed_signup .button:hover{background-color:#777}#mc_embed_signup .small-meta{font-size:11px}#mc_embed_signup .nowrap{white-space:nowrap}#mc_embed_signup .mc-field-group{clear:left;position:relative;width:96%;padding-bottom:3%;min-height:50px}#mc_embed_signup .size1of2{clear:none;float:left;display:inline-block;width:46%;margin-right:4%}* html #mc_embed_signup .size1of2{margin-right:2%}#mc_embed_signup .mc-field-group label{display:block;margin-bottom:3px}#mc_embed_signup .mc-field-group input{display:block;width:100%;padding:8px 0;text-indent:2%}#mc_embed_signup .mc-field-group select{display:inline-block;width:99%;padding:5px 0;margin-bottom:2px}#mc_embed_signup .datefield,#mc_embed_signup .phonefield-us{padding:5px 0}#mc_embed_signup .datefield input,#mc_embed_signup .phonefield-us input{display:inline;width:60px;margin:0 2px;letter-spacing:1px;text-align:center;padding:5px 0 2px}#mc_embed_signup .phonefield-us .phonearea input,#mc_embed_signup .phonefield-us .phonedetail1 input{width:40px}#mc_embed_signup .datefield .monthfield input,#mc_embed_signup .datefield .dayfield input{width:30px}#mc_embed_signup .datefield label,#mc_embed_signup .phonefield-us label{display:none}#mc_embed_signup .indicates-required{text-align:right;font-size:11px;margin-right:4%}#mc_embed_signup .asterisk{color:#e85c41;font-size:150%;font-weight:400;position:relative;top:5px}#mc_embed_signup .clear{clear:both}#mc_embed_signup .mc-field-group.input-group ul{margin:0;padding:5px 0;list-style:none}#mc_embed_signup .mc-field-group.input-group ul li{display:block;padding:3px 0;margin:0}#mc_embed_signup .mc-field-group.input-group label{display:inline}#mc_embed_signup .mc-field-group.input-group input{display:inline;width:auto;border:none}#mc_embed_signup div#mce-responses{float:left;top:-1.4em;padding:0 .5em;overflow:hidden;width:90%;margin:0 5%;clear:both}#mc_embed_signup div.response{margin:1em 0;padding:1em .5em .5em 0;font-weight:700;float:left;top:-1.5em;z-index:1;width:80%}#mc_embed_signup #mce-error-response{display:none}#mc_embed_signup #mce-success-response{color:#529214;display:none}#mc_embed_signup label.error{display:block;float:none;width:auto;margin-left:1.05em;text-align:left;padding:.5em 0}#mc-embedded-subscribe{clear:both;width:auto;display:block;margin:1em 0 1em 5%}#mc_embed_signup #num-subscribers{font-size:1.1em}#mc_embed_signup #num-subscribers span{padding:.5em;border:1px solid #ccc;margin-right:.5em;font-weight:700}#mc_embed_signup #mc-embedded-subscribe-form div.mce_inline_error{display:inline-block;margin:2px 0 1em;padding:5px 10px;background-color:rgba(255,255,255,.85);-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;font-size:14px;font-weight:400;z-index:1;color:#e85c41}#mc_embed_signup #mc-embedded-subscribe-form input.mce_inline_error{border:2px solid #e85c41}.colorscheme-dark #mc_embed_signup{background:#212121;border:1px solid}.colorscheme-dark input[type=email]{background:#181818;color:silver}#mc_embed_signup{background:#fff;clear:left;font:14px Helvetica,Arial,sans-serif}</style><div id=mc_embed_signup><form action="https://gmail.us5.list-manage.com/subscribe/post?u=c3b0164459768548b7bef380c&amp;id=1103acd526" method=post id=mc-embedded-subscribe-form name=mc-embedded-subscribe-form class=validate target=_blank novalidate><div id=mc_embed_signup_scroll><h3 style=text-align:center>当发布很酷的东西时，请第一时间通知我</h3><p style=text-align:center>订阅电子邮件，以获得我的最新文章。</p><div class=mc-field-group><label for=mce-EMAIL>邮箱地址 <span class=asterisk>*</span></label>
<input type=email name=EMAIL class="required email" id=mce-EMAIL></div><div id=mce-responses class=clear><div class=response id=mce-error-response style=display:none></div><div class=response id=mce-success-response style=display:none></div></div><div style=position:absolute;left:-5000px aria-hidden=true><input type=text name=b_c3b0164459768548b7bef380c_1103acd526 tabindex=-1></div><div class=clear><input type=submit value=订阅 name=subscribe id=mc-embedded-subscribe class=button></div></div></form></div><script type=text/javascript src=//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js></script><script type=text/javascript>(function($){window.fnames=new Array();window.ftypes=new Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';fnames[2]='LNAME';ftypes[2]='text';fnames[3]='ADDRESS';ftypes[3]='address';fnames[4]='PHONE';ftypes[4]='phone';fnames[5]='BIRTHDAY';ftypes[5]='birthday';}(jQuery));var $mcj=jQuery.noConflict(true);</script><section class=social-sharing><h4>分享到</h4><a href="https://twitter.com/intent/tweet?via=maoxunxing&text=How%20Web%20Works%20https%3a%2f%2fmaoxunxing.com%2fzh-cn%2fwebsite-architecture%2f" class="btn btn-twitter btn-social" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden=true></i><span>Twitter</span></a>
<a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fmaoxunxing.com%2fzh-cn%2fwebsite-architecture%2f" class="btn btn-facebook btn-social" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden=true></i><span>Facebook</span></a>
<a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fmaoxunxing.com%2fzh-cn%2fwebsite-architecture%2f" class="btn btn-linkedin btn-social" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden=true></i><span>LinkedIn</span></a></section><style>.utterances{max-width:initial!important;margin-top:40px}</style><script src=https://utteranc.es/client.js repo=XingMXTeam/XingMXTeam.github.io issue-term=pathname theme=github-light crossorigin=anonymous async></script><script>talkyardServerUrl='';talkyardLogLevel='warn';</script><script async defer src></script><section><div class=talkyard-comments data-discussion-id style=margin-top:45px><noscript>Please enable JavaScript to view comments.</noscript></div></section><footer></footer></article></section></div><footer class=footer><section class=container><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/ style=color:inherit>CC BY-NC-SA 4.0</a>
2022
©
Xunxing Mao</section></footer></main><script src=https://maoxunxing.com/js/coder.min.158f22d7bc754e28d7c61accc0aef7952c2b949889ec9503466e5d4db0548808.js integrity="sha256-FY8i17x1TijXxhrMwK73lSwrlJiJ7JUDRm5dTbBUiAg="></script><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-199510588-1','auto');ga('require','outboundLinkTracker');ga('send','pageview');</script><script src=https://www.google-analytics.com/analytics.js async></script><script src=https://cdnjs.cloudflare.com/ajax/libs/autotrack/2.4.1/autotrack.js async></script><script type=module>
    // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.8/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.8/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyDRvV151FcMlUQq5-5zUqaR1BHJ8RhwkTw",
    authDomain: "blog-6a0bf.firebaseapp.com",
    projectId: "blog-6a0bf",
    storageBucket: "blog-6a0bf.appspot.com",
    messagingSenderId: "379181681011",
    appId: "1:379181681011:web:cb9abcf9cfb01c2f181d06",
    measurementId: "G-65M6Z03PV2"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
</script><script>if('serviceWorker'in navigator){navigator.serviceWorker.register('/sw.js',{scope:'/'}).then(function(registration){});navigator.serviceWorker.ready.then(function(registration){});}</script></body></html>